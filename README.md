<p align="center">
  <img src="/img/orbofu.jpg" alt="orbofu image" width="50%">
</p>

# Orbofu

Orbofu stands for "ORdinateur de BOrd pour FUsée à eau" (meaning in french water rocket flight computer).

Orbofu is a project I started in 2023 because I couldn't find a good and simple open source water rocket flight computer using easily available parts.

Orbofu is capable of recording various flight data, saving them in a usable format, triggering a parachute on apogee detection and works over wifi (network generated by orbofu).

### Goal

Easily built a water rocket flight computer with cheap and available parts and little to no soldering.

# How to build - Hardware

### Bill Of Materials

- DFrobot firebeetle 2 ESP32-E (DFR0654) but other esp32 should work with some modifications to the pins in main.cpp & config in platformio.ini.
  - Note: I tried first using a lolin S3 pro and a C3 pico because they were great on paper (connect over usb-C, dedicated I²C port, battery port with charging circuit, ...) but didn't work :( (mainly because of the non Qwiic I²C port not much ressources where available online)
- BME390 barometric sensor (used as altimeter) or BME388 (cheaper but less accurate). I tried the official adafruit sensors, both worked but a no name BMP390L from aliexpress did not.
- Cheap & lightweight sg90 Servomotor (other should work too but you will probably have to edit main.cpp)
- 3.7V small battery (I used 250mAh ones) - **BE CAREFUL WITH THE POLARITY**
- If you want easy connections (I do) you can use stemma to dupont for the BMP

Price estimate: not sure for now

### Case

I plan to use raketfuedrockets' Phoenix 3D or aircommandrockets' modified version of it.

# How to use - Software

### Setup

- Connect bmp over I²C (or SPI if you prefer but you will have to edit main.cpp) and servo
- Set the pins in main.cpp
- flash esp using platform.io
- get everything in your rocket, connect the battery and connect to the generated wifi network (SSID:orbofu, no password, IP:192.168.4.1)
- go to 192.168.4.1 in your browser (might change for a dns), you're now on the control web interface !

### Managing a flight

- connect to the web interface, get the rocket ready and press "arm"
- launch the rocket, orbofu will now log data and trigger the parachute at the right time (hopefully)
- reconnect to the web interface when you get your rocket back, **DOWNLOAD LAST FLIGHT DATA** if you want to keep it and start again if you want to

- you can also press the other-than-reset button (27) to change the state of flight (armed or not)- check the arm flight status green led after pressing !
  - Note: button actives on button released (more reliable, less prone to bounces)
  - Note2: only use if unable to use web interface as you won't get flight data without being connected to web interface

### Led & errors info

- red led with battery icon is related to, well, battery (see dfrobot docs)
- green led aside usb-c connector (D9) indicates arm flight status (green if armed, off is not)
- rgb led in the middle of the board (D8, ws2812) indicates error. For now only BMP error in blue-ish, **DO NOT PROCEED if this led is blue** as the parachute may not deploy ! Press the reset button & verify connections (fyi cyan means failed reading, magenta means failed initilalization & led is reset when starting new flight)
- to test if servo working correctly: it shoud do a back and forth when starting (arming) flight

# Ressources used & useful links

### A small footnote about github copilot

Any use of this project's code by GitHub Copilot, past or present, is done without my permission. I do not consent to GitHub's use of this project's code in Copilot.

<p align="center"><a href="https://sfconservancy.org/GiveUpGitHub/"><img alt="Logo of the GiveUpGitHub campaign" src="https://sfconservancy.org/static/img/GiveUpGitHub.png" width="20%"></a></p>
